jQuery(function(){
    var JPlaceHolder = {
        //检测
        _check : function(){
            return 'placeholder' in document.createElement('input');
        },
        //初始化
        init : function(){
            if(!this._check()){
                this.fix();
            }
        },
        //修复
        fix : function(){
            jQuery('input[placeholder]').each(function(index, element) {
                var self = $(this), txt = self.attr('placeholder');

                var elementId = self.attr('id');
                if (!elementId) {
                    var now = new Date();
                    elementId = 'lbl_placeholder' + now.getSeconds() + now.getMilliseconds();
                    self.attr('id', elementId);
                }


                self.wrap($('<div></div>').addClass('labelWrap').css({position:'relative', zoom:'1', border:'none', background:'none', padding:'none', margin:'none',display:'inline-block'}));
                var pos = self.position(), h = self.outerHeight(true), paddingleft = self.css('padding-left');
                var holder = $('<label for="'+elementId+'"></label>').text(txt).css({position:'absolute', left:pos.left+10, top:pos.top, height:h, 'line-height':h+'px', paddingLeft:paddingleft, color:'#aaa',whiteSpace:'nowrap',cursor:'text'}).appendTo(self.parent());
                self.focusin(function(e) {
                    holder.hide();
                }).focusout(function(e) {
                    if(!self.val()){
                        holder.show();
                    }
                });
                //如果input本身value有值
                if(self.val()!=""){ holder.hide(); }
            });
        }
    };
    //执行
    JPlaceHolder.init();
});